<%- include('../layouts/doctor/header', { customCSS: '/css/doctor/form-step2.css' }) %>
<link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet" />

<div class="page-wrapper">
  <nav class="navbar">
    <div class="nav-brand">
      <img src="/assets/logo-icon1.png" alt="PrimeCare" class="brand-logo" />
      <div class="brand-text">
        <span class="brand-name">PrimeCare</span>
        <span class="brand-subtitle">Doctor Registration</span>
      </div>
    </div>
  </nav>

  <div class="content-wrapper">
    <div class="registration-container" data-aos="fade-up">
      <div class="progress-bar">
        <div class="step completed">
          <span class="step-number">
            <i class="fas fa-check"></i>
          </span>
          <span class="step-text">Personal Details</span>
        </div>
        <div class="step active">
          <span class="step-number">2</span>
          <span class="step-text">Professional Info</span>
        </div>
        <div class="step">
          <span class="step-number">3</span>
          <span class="step-text">Additional Info</span>
        </div>
        <div class="step">
          <span class="step-number">4</span>
          <span class="step-text">Preview & Submit</span>
        </div>
      </div>

      <form id="step2Form" class="registration-form" enctype="multipart/form-data">
        <div class="section education-section">
          <h3>Educational Details</h3>
          <div class="form-grid">
            <div class="input-group">
              <i class="fas fa-graduation-cap"></i>
              <input
                type="text"
                placeholder="Highest Qualification"
                id="qualification"
                name="qualification"
                value="<%= doctorDetails && doctorDetails.qualification ? doctorDetails.qualification : '' %>"
              />
              <div class="error-message"></div>
            </div>
            <div class="input-group">
              <i class="fas fa-stethoscope"></i>
              <select id="specialization" name="specialization">
                <option value="">Select Specialization</option>
                <% const specializations = ["Cardiologist", "Dermatologist", "Pediatrician", "General Physician", "Orthopedic Surgeon", "Gynecologist", "Neurologist", "Psychiatrist", "ENT Specialist", "Urologist", "Ophthalmologist", "Oncologist", "Dentist", "Endocrinologist", "Gastroenterologist", "Pulmonologist", "Nephrologist", "Rheumatologist", "Surgeon", "Radiologist", "Anesthesiologist", "Allergist/Immunologist", "Hematologist", "Pathologist", "Plastic Surgeon", "Infectious Disease Specialist", "Sexologist", "Physiotherapist", "Ayurveda Specialist", "Homeopathy Doctor"]; %>
                <% specializations.forEach(spec => { %>
                  <option value="<%= spec %>" <%= doctorDetails && doctorDetails.specialization === spec ? 'selected' : '' %>><%= spec %></option>
                <% }); %>
              </select>
              <div class="error-message"></div>
            </div>
            <div class="input-group">
              <i class="fas fa-university"></i>
              <input
                type="text"
                placeholder="Medical School/University Name"
                name="university"
                value="<%= doctorDetails && doctorDetails.university ? doctorDetails.university : '' %>"
              />
              <div class="error-message"></div>
            </div>
            <div class="input-group">
              <i class="fas fa-calendar-alt"></i>
              <input
                type="number"
                placeholder="Year of Graduation"
                name="graduationYear"
                min="1950"
                max="2024"
                value="<%= doctorDetails && doctorDetails.graduationYear ? doctorDetails.graduationYear : '' %>"
              />
              <div class="error-message"></div>
            </div>
            <div class="input-group">
              <i class="fas fa-globe"></i>
              <input
                type="text"
                placeholder="Country of Study"
                name="studyCountry"
                value="<%= doctorDetails && doctorDetails.studyCountry ? doctorDetails.studyCountry : '' %>"
              />
              <div class="error-message"></div>
            </div>
          </div>

          <div class="dropzone" id="certificationDropzone">
            <input type="file" id="certificationUpload" name="certification" accept="image/*" hidden />
            <div class="dropzone-content" style="display: <%= (doctorDetails && doctorDetails.certification) ? 'none' : 'flex' %>">
              <i class="fas fa-cloud-upload-alt"></i>
              <p>Upload Certification Document</p>
              <p class="small">Supported formats: JPG, PNG (Max size: 5MB)</p>
            </div>
            <div class="preview-container" id="certPreviewContainer" style="display: <%= (doctorDetails && doctorDetails.certification) ? 'block' : 'none' %>">
              <img id="certPreviewImage" src="<%= doctorDetails.certification %>" alt="Certification Preview" style="max-width: 100%; height: auto;" />
              <div class="preview-info">
                <span id="certFileNameDisplay">Uploaded Certification</span>
                <button type="button" id="removeCertFile" class="remove-btn">
                  <i class="fas fa-times"></i>
                </button>
              </div>
            </div>
          </div>
        </div>

        <div class="section experience-section">
          <h3>Experience Details</h3>
          <div class="form-grid">
            <div class="input-group">
              <i class="fas fa-clock"></i>
              <input
                type="number"
                name="yearsOfExperience"
                placeholder="Years of Practice"
                min="0"
                value="<%= doctorDetails && doctorDetails.yearsOfExperience ? doctorDetails.yearsOfExperience : '' %>"
              />
              <div class="error-message"></div>
            </div>
            <div class="input-group">
              <i class="fas fa-hospital"></i>
              <input
                type="text"
                name="previousHospital"
                placeholder="Previous Hospital/Clinic Name"
                value="<%= doctorDetails && doctorDetails.previousHospital ? doctorDetails.previousHospital : '' %>"
              />
              <div class="error-message"></div>
            </div>
          </div>

          <div class="dropzone" id="experienceDropzone">
            <input type="file" id="experienceUpload" name="experience" accept="image/*" hidden />
            <div class="dropzone-content" style="display: <%= (doctorDetails && doctorDetails.experience) ? 'none' : 'flex' %>">
              <i class="fas fa-cloud-upload-alt"></i>
              <p>Upload Experience Certificate</p>
              <p class="small">Supported formats: JPG, PNG (Max size: 5MB)</p>
            </div>
            <div class="preview-container" id="expPreviewContainer" style="display: <%= (doctorDetails && doctorDetails.experience) ? 'block' : 'none' %>">
              <img id="expPreviewImage" src="<%= doctorDetails.experience %>" alt="Experience Certificate Preview" style="max-width: 100%; height: auto;" />
              <div class="preview-info">
                <span id="expFileNameDisplay">Uploaded Experience Certificate</span>
                <button type="button" id="removeExpFile" class="remove-btn">
                  <i class="fas fa-times"></i>
                </button>
              </div>
            </div>
          </div>
        </div>

        <div class="form-buttons">
          <button type="button" class="back-btn">
            <i class="fas fa-arrow-left"></i> Previous
          </button>
          <button type="submit" class="next-btn">
            Next Step <i class="fas fa-arrow-right"></i>
          </button>
        </div>
      </form>
    </div>
  </div>
</div>

<script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
<script src="/scripts/doctor/form-step2.js"></script>
<%- include('../layouts/doctor/footer') %>
